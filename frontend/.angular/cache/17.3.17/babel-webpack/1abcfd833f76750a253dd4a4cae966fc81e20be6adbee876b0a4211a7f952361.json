{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { RouterModule } from '@angular/router';\nimport { Validators, ReactiveFormsModule } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"../../services/auth.service\";\nimport * as i3 from \"../../services/appointment.service\";\nimport * as i4 from \"../../services/user.service\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/router\";\nconst _c0 = () => ({\n  exact: true\n});\nfunction PatientDashboardComponent_div_22_div_5_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 22)(1, \"h3\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"p\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"button\", 23);\n    i0.ɵɵlistener(\"click\", function PatientDashboardComponent_div_22_div_5_div_1_Template_button_click_7_listener() {\n      const doctor_r3 = i0.ɵɵrestoreView(_r2).$implicit;\n      const ctx_r3 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r3.assignFamilyDoctor(doctor_r3.id));\n    });\n    i0.ɵɵtext(8, \" \\u0412\\u044B\\u0431\\u0440\\u0430\\u0442\\u044C \");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const doctor_r3 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\"\", doctor_r3.firstName, \" \", doctor_r3.lastName, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(doctor_r3.email);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(doctor_r3.phone);\n  }\n}\nfunction PatientDashboardComponent_div_22_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 20);\n    i0.ɵɵtemplate(1, PatientDashboardComponent_div_22_div_5_div_1_Template, 9, 4, \"div\", 21);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngForOf\", ctx_r3.therapists);\n  }\n}\nfunction PatientDashboardComponent_div_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 18)(1, \"h2\");\n    i0.ɵɵtext(2, \"\\u0421\\u0435\\u043C\\u0435\\u0439\\u043D\\u044B\\u0439 \\u0432\\u0440\\u0430\\u0447\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"p\");\n    i0.ɵɵtext(4, \"\\u0423 \\u0432\\u0430\\u0441 \\u043D\\u0435\\u0442 \\u0441\\u0435\\u043C\\u0435\\u0439\\u043D\\u043E\\u0433\\u043E \\u0432\\u0440\\u0430\\u0447\\u0430. \\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0442\\u0435\\u0440\\u0430\\u043F\\u0435\\u0432\\u0442\\u0430:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(5, PatientDashboardComponent_div_22_div_5_Template, 2, 1, \"div\", 19);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.therapists.length > 0);\n  }\n}\nfunction PatientDashboardComponent_div_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 24)(1, \"h2\");\n    i0.ɵɵtext(2, \"\\u0421\\u0435\\u043C\\u0435\\u0439\\u043D\\u044B\\u0439 \\u0432\\u0440\\u0430\\u0447\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 25)(4, \"h3\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"p\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"p\");\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate2(\"\", ctx_r3.currentUser == null ? null : ctx_r3.currentUser.familyDoctor == null ? null : ctx_r3.currentUser.familyDoctor.firstName, \" \", ctx_r3.currentUser == null ? null : ctx_r3.currentUser.familyDoctor == null ? null : ctx_r3.currentUser.familyDoctor.lastName, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r3.currentUser == null ? null : ctx_r3.currentUser.familyDoctor == null ? null : ctx_r3.currentUser.familyDoctor.email);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r3.currentUser == null ? null : ctx_r3.currentUser.familyDoctor == null ? null : ctx_r3.currentUser.familyDoctor.phone);\n  }\n}\nfunction PatientDashboardComponent_div_27_div_1_div_22_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 35)(1, \"button\", 36);\n    i0.ɵɵlistener(\"click\", function PatientDashboardComponent_div_27_div_1_div_22_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const appointment_r6 = i0.ɵɵnextContext().$implicit;\n      const ctx_r3 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r3.cancelAppointment(appointment_r6._id));\n    });\n    i0.ɵɵtext(2, \" \\u041E\\u0442\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C \");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction PatientDashboardComponent_div_27_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 28)(1, \"div\", 29)(2, \"div\")(3, \"h3\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\", 30);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"span\", 31);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(9, \"div\", 32)(10, \"div\", 33)(11, \"strong\");\n    i0.ɵɵtext(12, \"\\u0414\\u0430\\u0442\\u0430:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"div\", 33)(15, \"strong\");\n    i0.ɵɵtext(16, \"\\u0412\\u0440\\u0435\\u043C\\u044F:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(17);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"div\", 33)(19, \"strong\");\n    i0.ɵɵtext(20, \"\\u041F\\u0440\\u0438\\u0447\\u0438\\u043D\\u0430:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(21);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(22, PatientDashboardComponent_div_27_div_1_div_22_Template, 3, 0, \"div\", 34);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const appointment_r6 = ctx.$implicit;\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate2(\"\", appointment_r6.doctor.firstName, \" \", appointment_r6.doctor.lastName, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r3.getSpecialtyName(appointment_r6.doctor.specialty));\n    i0.ɵɵadvance();\n    i0.ɵɵclassMap(appointment_r6.status);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r3.getStatusName(appointment_r6.status));\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r3.formatDate(appointment_r6.date), \" \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", appointment_r6.time, \" \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", appointment_r6.reason || \"\\u041D\\u0435 \\u0443\\u043A\\u0430\\u0437\\u0430\\u043D\\u0430\", \" \");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", appointment_r6.status === \"scheduled\");\n  }\n}\nfunction PatientDashboardComponent_div_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 26);\n    i0.ɵɵtemplate(1, PatientDashboardComponent_div_27_div_1_Template, 23, 10, \"div\", 27);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngForOf\", ctx_r3.appointments);\n  }\n}\nfunction PatientDashboardComponent_ng_template_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 37);\n    i0.ɵɵtext(1, \"\\u0423 \\u0432\\u0430\\u0441 \\u043D\\u0435\\u0442 \\u0437\\u0430\\u043F\\u0438\\u0441\\u0435\\u0439 \\u043D\\u0430 \\u043F\\u0440\\u0438\\u0435\\u043C\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction PatientDashboardComponent_div_30_div_26_option_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 56);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const doctor_r9 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", doctor_r9.id);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate2(\" \", doctor_r9.firstName, \" \", doctor_r9.lastName, \" \");\n  }\n}\nfunction PatientDashboardComponent_div_30_div_26_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 40)(1, \"label\");\n    i0.ɵɵtext(2, \"\\u0412\\u0440\\u0430\\u0447\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"select\", 54);\n    i0.ɵɵlistener(\"change\", function PatientDashboardComponent_div_30_div_26_Template_select_change_3_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r3 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r3.onDoctorChange());\n    });\n    i0.ɵɵelementStart(4, \"option\", 42);\n    i0.ɵɵtext(5, \"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0432\\u0440\\u0430\\u0447\\u0430\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(6, PatientDashboardComponent_div_30_div_26_option_6_Template, 2, 3, \"option\", 55);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r3.doctorsList);\n  }\n}\nfunction PatientDashboardComponent_div_30_div_27_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 40)(1, \"label\");\n    i0.ɵɵtext(2, \"\\u0414\\u0430\\u0442\\u0430\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"input\", 57);\n    i0.ɵɵlistener(\"change\", function PatientDashboardComponent_div_30_div_27_Template_input_change_3_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r3 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r3.onDateChange());\n    });\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"min\", ctx_r3.minDate);\n  }\n}\nfunction PatientDashboardComponent_div_30_div_28_button_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 60);\n    i0.ɵɵlistener(\"click\", function PatientDashboardComponent_div_30_div_28_button_4_Template_button_click_0_listener() {\n      const slot_r12 = i0.ɵɵrestoreView(_r11).$implicit;\n      const ctx_r3 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r3.selectTime(slot_r12.time));\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const slot_r12 = ctx.$implicit;\n    i0.ɵɵclassProp(\"disabled\", !slot_r12.available);\n    i0.ɵɵproperty(\"disabled\", !slot_r12.available);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", slot_r12.time, \" \");\n  }\n}\nfunction PatientDashboardComponent_div_30_div_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 40)(1, \"label\");\n    i0.ɵɵtext(2, \"\\u0412\\u0440\\u0435\\u043C\\u044F\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 58);\n    i0.ɵɵtemplate(4, PatientDashboardComponent_div_30_div_28_button_4_Template, 2, 4, \"button\", 59);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r3.availableSlots);\n  }\n}\nfunction PatientDashboardComponent_div_30_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 38)(1, \"h2\");\n    i0.ɵɵtext(2, \"\\u0417\\u0430\\u043F\\u0438\\u0441\\u0430\\u0442\\u044C\\u0441\\u044F \\u043D\\u0430 \\u043F\\u0440\\u0438\\u0435\\u043C\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"form\", 39);\n    i0.ɵɵlistener(\"ngSubmit\", function PatientDashboardComponent_div_30_Template_form_ngSubmit_3_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.onBookingSubmit());\n    });\n    i0.ɵɵelementStart(4, \"div\", 40)(5, \"label\");\n    i0.ɵɵtext(6, \"\\u0421\\u043F\\u0435\\u0446\\u0438\\u0430\\u043B\\u0438\\u0437\\u0430\\u0446\\u0438\\u044F\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"select\", 41);\n    i0.ɵɵlistener(\"change\", function PatientDashboardComponent_div_30_Template_select_change_7_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.onSpecialtyChange());\n    });\n    i0.ɵɵelementStart(8, \"option\", 42);\n    i0.ɵɵtext(9, \"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0441\\u043F\\u0435\\u0446\\u0438\\u0430\\u043B\\u0438\\u0437\\u0430\\u0446\\u0438\\u044E\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"option\", 43);\n    i0.ɵɵtext(11, \"\\u0422\\u0435\\u0440\\u0430\\u043F\\u0435\\u0432\\u0442\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"option\", 44);\n    i0.ɵɵtext(13, \"\\u0425\\u0438\\u0440\\u0443\\u0440\\u0433\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"option\", 45);\n    i0.ɵɵtext(15, \"\\u041A\\u0430\\u0440\\u0434\\u0438\\u043E\\u043B\\u043E\\u0433\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"option\", 46);\n    i0.ɵɵtext(17, \"\\u041D\\u0435\\u0432\\u0440\\u043E\\u043B\\u043E\\u0433\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"option\", 47);\n    i0.ɵɵtext(19, \"\\u0414\\u0435\\u0440\\u043C\\u0430\\u0442\\u043E\\u043B\\u043E\\u0433\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(20, \"option\", 48);\n    i0.ɵɵtext(21, \"\\u041F\\u0435\\u0434\\u0438\\u0430\\u0442\\u0440\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(22, \"option\", 49);\n    i0.ɵɵtext(23, \"\\u041E\\u0444\\u0442\\u0430\\u043B\\u044C\\u043C\\u043E\\u043B\\u043E\\u0433\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(24, \"option\", 50);\n    i0.ɵɵtext(25, \"\\u041F\\u0441\\u0438\\u0445\\u0438\\u0430\\u0442\\u0440\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(26, PatientDashboardComponent_div_30_div_26_Template, 7, 1, \"div\", 51)(27, PatientDashboardComponent_div_30_div_27_Template, 4, 1, \"div\", 51)(28, PatientDashboardComponent_div_30_div_28_Template, 5, 1, \"div\", 51);\n    i0.ɵɵelementStart(29, \"div\", 40)(30, \"label\");\n    i0.ɵɵtext(31, \"\\u041F\\u0440\\u0438\\u0447\\u0438\\u043D\\u0430 \\u043E\\u0431\\u0440\\u0430\\u0449\\u0435\\u043D\\u0438\\u044F\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(32, \"textarea\", 52);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(33, \"button\", 53);\n    i0.ɵɵtext(34, \" \\u0417\\u0430\\u043F\\u0438\\u0441\\u0430\\u0442\\u044C\\u0441\\u044F \");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    let tmp_4_0;\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"formGroup\", ctx_r3.bookingForm);\n    i0.ɵɵadvance(23);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.doctorsList.length > 0);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", (tmp_4_0 = ctx_r3.bookingForm.get(\"doctorId\")) == null ? null : tmp_4_0.value);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.availableSlots.length > 0);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"disabled\", ctx_r3.bookingForm.invalid);\n  }\n}\nexport let PatientDashboardComponent = /*#__PURE__*/(() => {\n  class PatientDashboardComponent {\n    constructor(fb, authService, appointmentService, userService) {\n      this.fb = fb;\n      this.authService = authService;\n      this.appointmentService = appointmentService;\n      this.userService = userService;\n      this.currentUser = null;\n      this.appointments = [];\n      this.therapists = [];\n      this.doctorsList = [];\n      this.availableSlots = [];\n      this.showBookingForm = false;\n      this.minDate = '';\n      this.bookingForm = this.fb.group({\n        specialty: ['', Validators.required],\n        doctorId: ['', Validators.required],\n        date: ['', Validators.required],\n        time: ['', Validators.required],\n        reason: ['']\n      });\n      const today = new Date();\n      this.minDate = today.toISOString().split('T')[0];\n    }\n    ngOnInit() {\n      this.currentUser = this.authService.getCurrentUser();\n      this.loadAppointments();\n      this.loadTherapists();\n    }\n    loadAppointments() {\n      this.appointmentService.getAppointments().subscribe({\n        next: data => {\n          this.appointments = data;\n        }\n      });\n    }\n    loadTherapists() {\n      this.userService.getDoctors('therapist').subscribe({\n        next: data => {\n          this.therapists = data;\n        }\n      });\n    }\n    assignFamilyDoctor(doctorId) {\n      this.userService.assignFamilyDoctor(doctorId).subscribe({\n        next: data => {\n          this.currentUser = data;\n          this.authService.currentUser$.subscribe(user => {\n            if (user) {\n              user.familyDoctor = data.familyDoctor;\n            }\n          });\n        }\n      });\n    }\n    onSpecialtyChange() {\n      const specialty = this.bookingForm.get('specialty')?.value;\n      if (specialty) {\n        this.userService.getDoctors(specialty).subscribe({\n          next: data => {\n            this.doctorsList = data;\n          }\n        });\n      }\n    }\n    onDoctorChange() {\n      this.bookingForm.patchValue({\n        date: '',\n        time: ''\n      });\n      this.availableSlots = [];\n    }\n    onDateChange() {\n      const doctorId = this.bookingForm.get('doctorId')?.value;\n      const date = this.bookingForm.get('date')?.value;\n      if (doctorId && date) {\n        this.appointmentService.getAvailableSlots(doctorId, date).subscribe({\n          next: data => {\n            this.availableSlots = data;\n          }\n        });\n      }\n    }\n    selectTime(time) {\n      this.bookingForm.patchValue({\n        time\n      });\n      const slots = document.querySelectorAll('.time-slot');\n      slots.forEach(slot => slot.classList.remove('selected'));\n      event?.target && event.target.classList.add('selected');\n    }\n    onBookingSubmit() {\n      if (this.bookingForm.valid) {\n        const formData = this.bookingForm.value;\n        this.appointmentService.createAppointment(formData).subscribe({\n          next: () => {\n            this.loadAppointments();\n            this.bookingForm.reset();\n            this.showBookingForm = false;\n            this.availableSlots = [];\n          }\n        });\n      }\n    }\n    cancelAppointment(id) {\n      if (confirm('Вы уверены, что хотите отменить запись?')) {\n        this.appointmentService.cancelAppointment(id).subscribe({\n          next: () => {\n            this.loadAppointments();\n          }\n        });\n      }\n    }\n    getSpecialtyName(specialty) {\n      const specialties = {\n        therapist: 'Терапевт',\n        surgeon: 'Хирург',\n        cardiologist: 'Кардиолог',\n        neurologist: 'Невролог',\n        dermatologist: 'Дерматолог',\n        pediatrician: 'Педиатр',\n        ophthalmologist: 'Офтальмолог',\n        psychiatrist: 'Психиатр'\n      };\n      return specialty ? specialties[specialty] : '';\n    }\n    getStatusName(status) {\n      const statuses = {\n        scheduled: 'Запланировано',\n        completed: 'Завершено',\n        cancelled: 'Отменено'\n      };\n      return statuses[status] || status;\n    }\n    formatDate(date) {\n      return new Date(date).toLocaleDateString('ru-RU');\n    }\n    logout() {\n      this.authService.logout().subscribe();\n    }\n    static {\n      this.ɵfac = function PatientDashboardComponent_Factory(t) {\n        return new (t || PatientDashboardComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.AuthService), i0.ɵɵdirectiveInject(i3.AppointmentService), i0.ɵɵdirectiveInject(i4.UserService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: PatientDashboardComponent,\n        selectors: [[\"app-patient-dashboard\"]],\n        standalone: true,\n        features: [i0.ɵɵStandaloneFeature],\n        decls: 31,\n        vars: 9,\n        consts: [[\"noAppointments\", \"\"], [1, \"dashboard\"], [1, \"header\"], [1, \"header-content\"], [1, \"user-info\"], [1, \"btn-logout\", 3, \"click\"], [1, \"content\"], [1, \"sidebar\"], [\"routerLink\", \"/patient\", \"routerLinkActive\", \"active\", 3, \"routerLinkActiveOptions\"], [\"routerLink\", \"/patient/doctors\", \"routerLinkActive\", \"active\"], [\"routerLink\", \"/patient/medical-records\", \"routerLinkActive\", \"active\"], [\"routerLink\", \"/patient/profile\", \"routerLinkActive\", \"active\"], [1, \"main-content\"], [\"class\", \"family-doctor-section\", 4, \"ngIf\"], [\"class\", \"family-doctor-info\", 4, \"ngIf\"], [1, \"appointments-section\"], [\"class\", \"appointments-list\", 4, \"ngIf\", \"ngIfElse\"], [\"class\", \"booking-section\", 4, \"ngIf\"], [1, \"family-doctor-section\"], [\"class\", \"doctors-grid\", 4, \"ngIf\"], [1, \"doctors-grid\"], [\"class\", \"doctor-card\", 4, \"ngFor\", \"ngForOf\"], [1, \"doctor-card\"], [1, \"btn-primary\", 3, \"click\"], [1, \"family-doctor-info\"], [1, \"doctor-info\"], [1, \"appointments-list\"], [\"class\", \"appointment-card\", 4, \"ngFor\", \"ngForOf\"], [1, \"appointment-card\"], [1, \"appointment-header\"], [1, \"specialty\"], [1, \"status\"], [1, \"appointment-details\"], [1, \"detail\"], [\"class\", \"appointment-actions\", 4, \"ngIf\"], [1, \"appointment-actions\"], [1, \"btn-cancel\", 3, \"click\"], [1, \"no-data\"], [1, \"booking-section\"], [3, \"ngSubmit\", \"formGroup\"], [1, \"form-group\"], [\"formControlName\", \"specialty\", 1, \"form-control\", 3, \"change\"], [\"value\", \"\"], [\"value\", \"therapist\"], [\"value\", \"surgeon\"], [\"value\", \"cardiologist\"], [\"value\", \"neurologist\"], [\"value\", \"dermatologist\"], [\"value\", \"pediatrician\"], [\"value\", \"ophthalmologist\"], [\"value\", \"psychiatrist\"], [\"class\", \"form-group\", 4, \"ngIf\"], [\"formControlName\", \"reason\", \"rows\", \"3\", 1, \"form-control\"], [\"type\", \"submit\", 1, \"btn-primary\", 3, \"disabled\"], [\"formControlName\", \"doctorId\", 1, \"form-control\", 3, \"change\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [3, \"value\"], [\"type\", \"date\", \"formControlName\", \"date\", 1, \"form-control\", 3, \"change\", \"min\"], [1, \"time-slots\"], [\"type\", \"button\", \"class\", \"time-slot\", 3, \"disabled\", \"click\", 4, \"ngFor\", \"ngForOf\"], [\"type\", \"button\", 1, \"time-slot\", 3, \"click\", \"disabled\"]],\n        template: function PatientDashboardComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            const _r1 = i0.ɵɵgetCurrentView();\n            i0.ɵɵelementStart(0, \"div\", 1)(1, \"header\", 2)(2, \"div\", 3)(3, \"h1\");\n            i0.ɵɵtext(4, \"\\u041B\\u0438\\u0447\\u043D\\u044B\\u0439 \\u043A\\u0430\\u0431\\u0438\\u043D\\u0435\\u0442 \\u043F\\u0430\\u0446\\u0438\\u0435\\u043D\\u0442\\u0430\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(5, \"div\", 4)(6, \"span\");\n            i0.ɵɵtext(7);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(8, \"button\", 5);\n            i0.ɵɵlistener(\"click\", function PatientDashboardComponent_Template_button_click_8_listener() {\n              i0.ɵɵrestoreView(_r1);\n              return i0.ɵɵresetView(ctx.logout());\n            });\n            i0.ɵɵtext(9, \"\\u0412\\u044B\\u0445\\u043E\\u0434\");\n            i0.ɵɵelementEnd()()()();\n            i0.ɵɵelementStart(10, \"div\", 6)(11, \"div\", 7)(12, \"nav\")(13, \"a\", 8);\n            i0.ɵɵtext(14, \" \\u041C\\u043E\\u0438 \\u043F\\u0440\\u0438\\u0435\\u043C\\u044B \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(15, \"a\", 9);\n            i0.ɵɵtext(16, \" \\u0417\\u0430\\u043F\\u0438\\u0441\\u0430\\u0442\\u044C\\u0441\\u044F \\u043D\\u0430 \\u043F\\u0440\\u0438\\u0435\\u043C \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(17, \"a\", 10);\n            i0.ɵɵtext(18, \" \\u041C\\u0435\\u0434\\u0438\\u0446\\u0438\\u043D\\u0441\\u043A\\u0430\\u044F \\u043A\\u0430\\u0440\\u0442\\u0430 \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(19, \"a\", 11);\n            i0.ɵɵtext(20, \" \\u041F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044C \");\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(21, \"main\", 12);\n            i0.ɵɵtemplate(22, PatientDashboardComponent_div_22_Template, 6, 1, \"div\", 13)(23, PatientDashboardComponent_div_23_Template, 10, 4, \"div\", 14);\n            i0.ɵɵelementStart(24, \"div\", 15)(25, \"h2\");\n            i0.ɵɵtext(26, \"\\u041C\\u043E\\u0438 \\u0437\\u0430\\u043F\\u0438\\u0441\\u0438 \\u043D\\u0430 \\u043F\\u0440\\u0438\\u0435\\u043C\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(27, PatientDashboardComponent_div_27_Template, 2, 1, \"div\", 16)(28, PatientDashboardComponent_ng_template_28_Template, 2, 0, \"ng-template\", null, 0, i0.ɵɵtemplateRefExtractor);\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(30, PatientDashboardComponent_div_30_Template, 35, 5, \"div\", 17);\n            i0.ɵɵelementEnd()()();\n          }\n          if (rf & 2) {\n            const noAppointments_r13 = i0.ɵɵreference(29);\n            i0.ɵɵadvance(7);\n            i0.ɵɵtextInterpolate2(\"\", ctx.currentUser == null ? null : ctx.currentUser.firstName, \" \", ctx.currentUser == null ? null : ctx.currentUser.lastName, \"\");\n            i0.ɵɵadvance(6);\n            i0.ɵɵproperty(\"routerLinkActiveOptions\", i0.ɵɵpureFunction0(8, _c0));\n            i0.ɵɵadvance(9);\n            i0.ɵɵproperty(\"ngIf\", !(ctx.currentUser == null ? null : ctx.currentUser.familyDoctor));\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.currentUser == null ? null : ctx.currentUser.familyDoctor);\n            i0.ɵɵadvance(4);\n            i0.ɵɵproperty(\"ngIf\", ctx.appointments.length > 0)(\"ngIfElse\", noAppointments_r13);\n            i0.ɵɵadvance(3);\n            i0.ɵɵproperty(\"ngIf\", ctx.showBookingForm);\n          }\n        },\n        dependencies: [CommonModule, i5.NgForOf, i5.NgIf, RouterModule, i6.RouterLink, i6.RouterLinkActive, ReactiveFormsModule, i1.ɵNgNoValidate, i1.NgSelectOption, i1.ɵNgSelectMultipleOption, i1.DefaultValueAccessor, i1.SelectControlValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName],\n        styles: [\".dashboard[_ngcontent-%COMP%]{min-height:100vh;background:#f5f7fa}.header[_ngcontent-%COMP%]{background:#fff;box-shadow:0 2px 8px #0000001a;padding:20px 0}.header-content[_ngcontent-%COMP%]{max-width:1400px;margin:0 auto;padding:0 20px;display:flex;justify-content:space-between;align-items:center}h1[_ngcontent-%COMP%]{color:#333;font-size:28px;margin:0}.user-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px}.btn-logout[_ngcontent-%COMP%]{padding:8px 20px;background:#e74c3c;color:#fff;border:none;border-radius:6px;cursor:pointer;font-size:14px}.content[_ngcontent-%COMP%]{max-width:1400px;margin:30px auto;padding:0 20px;display:grid;grid-template-columns:250px 1fr;gap:30px}.sidebar[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:20px;height:-moz-fit-content;height:fit-content;box-shadow:0 2px 8px #0000001a}.sidebar[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.sidebar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:12px 16px;color:#555;text-decoration:none;border-radius:8px;transition:all .3s}.sidebar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background:#f5f7fa}.sidebar[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.main-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:30px}.family-doctor-section[_ngcontent-%COMP%], .family-doctor-info[_ngcontent-%COMP%], .appointments-section[_ngcontent-%COMP%], .booking-section[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:30px;box-shadow:0 2px 8px #0000001a}h2[_ngcontent-%COMP%]{color:#333;font-size:24px;margin-bottom:20px}.doctors-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:20px;margin-top:20px}.doctor-card[_ngcontent-%COMP%]{border:2px solid #e0e0e0;border-radius:10px;padding:20px;text-align:center}.doctor-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#333;font-size:18px;margin:0 0 10px}.doctor-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:14px;margin:5px 0}.doctor-info[_ngcontent-%COMP%]{border:2px solid #667eea;border-radius:10px;padding:20px}.doctor-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#333;font-size:20px;margin:0 0 10px}.doctor-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:14px;margin:5px 0}.appointments-list[_ngcontent-%COMP%]{display:grid;gap:20px}.appointment-card[_ngcontent-%COMP%]{border:2px solid #e0e0e0;border-radius:10px;padding:20px}.appointment-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:15px}.appointment-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#333;font-size:20px;margin:0}.specialty[_ngcontent-%COMP%]{color:#667eea;font-size:14px;margin:5px 0 0}.status[_ngcontent-%COMP%]{padding:6px 14px;border-radius:20px;font-size:13px;font-weight:500}.status.scheduled[_ngcontent-%COMP%]{background:#e3f2fd;color:#1976d2}.status.completed[_ngcontent-%COMP%]{background:#e8f5e9;color:#388e3c}.status.cancelled[_ngcontent-%COMP%]{background:#ffebee;color:#d32f2f}.appointment-details[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin-bottom:15px}.detail[_ngcontent-%COMP%]{color:#666;font-size:14px}.detail[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#333;margin-right:5px}.appointment-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.btn-cancel[_ngcontent-%COMP%]{padding:10px 20px;background:#e74c3c;color:#fff;border:none;border-radius:6px;cursor:pointer;font-size:14px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;color:#555;font-weight:500}.form-control[_ngcontent-%COMP%]{width:100%;padding:12px;border:2px solid #e0e0e0;border-radius:8px;font-size:15px;transition:border-color .3s;box-sizing:border-box}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea}.time-slots[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(100px,1fr));gap:10px}.time-slot[_ngcontent-%COMP%]{padding:10px;border:2px solid #667eea;background:#fff;color:#667eea;border-radius:6px;cursor:pointer;transition:all .3s}.time-slot[_ngcontent-%COMP%]:hover:not(.disabled){background:#667eea;color:#fff}.time-slot.disabled[_ngcontent-%COMP%]{border-color:#ccc;color:#ccc;cursor:not-allowed}.time-slot.selected[_ngcontent-%COMP%]{background:#667eea;color:#fff}.btn-primary[_ngcontent-%COMP%]{padding:12px 30px;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;border-radius:6px;cursor:pointer;font-size:16px;transition:transform .2s}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px)}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.no-data[_ngcontent-%COMP%]{text-align:center;color:#999;padding:40px;font-size:16px}\"]\n      });\n    }\n  }\n  return PatientDashboardComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}